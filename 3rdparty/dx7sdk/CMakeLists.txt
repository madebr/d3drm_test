function(add_x7sdk_library NAME TYPE)
    if(TYPE STREQUAL "SHARED")
        add_library(${NAME} SHARED IMPORTED GLOBAL)
        set_property(TARGET ${NAME} PROPERTY IMPORTED_IMPLIB "${CMAKE_CURRENT_SOURCE_DIR}/lib/${NAME}.lib")
        set_property(TARGET ${NAME} PROPERTY IMPORTED_LOCATION "${CMAKE_CURRENT_SOURCE_DIR}/bin/${NAME}.dll")
    elseif(TYPE STREQUAL "STATIC")
        add_library(${NAME} STATIC IMPORTED GLOBAL)
        set_property(TARGET ${NAME} PROPERTY IMPORTED_LOCATION "${CMAKE_CURRENT_SOURCE_DIR}/lib/${NAME}.lib")
    else()
        message(FATAL_ERROR "Invalid TYPE=${TYPE}")
    endif()
    set_property(TARGET ${NAME} PROPERTY INTERFACE_INCLUDE_DIRECTORIES "${CMAKE_CURRENT_SOURCE_DIR}/include")
endfunction()

add_x7sdk_library(d3dim SHARED)
add_x7sdk_library(d3drm SHARED)
add_x7sdk_library(d3dx STATIC)
add_x7sdk_library(d3dxd STATIC)
add_x7sdk_library(d3dxof SHARED)
add_x7sdk_library(ddraw SHARED)
add_x7sdk_library(dinput SHARED)
add_x7sdk_library(dplayx SHARED)
add_x7sdk_library(dsetup SHARED)
add_x7sdk_library(dsound SHARED)
add_x7sdk_library(dxguid STATIC)

if(MSVC)
    add_library(d3dx_fix STATIC fix/d3dx_fix.c)
    set_property(TARGET d3dx APPEND PROPERTY INTERFACE_LINK_LIBRARIES "d3dx_fix")
    set_property(TARGET d3dxd APPEND PROPERTY INTERFACE_LINK_LIBRARIES "d3dx_fix")
endif()
